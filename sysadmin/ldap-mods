### optimize database ######################################

dn: olcDatabase={1}hdb,cn=config
changetype: modify
add: olcDbIndex
olcDbIndex: default sub

dn: olcDatabase={1}hdb,cn=config
changetype: modify
add: olcDbIndex
olcDbIndex: cn,sn,uid,displayName pres,sub,eq

dn: olcDatabase={1}hdb,cn=config
changetype: modify
add: olcDbIndex
olcDbIndex: uidNumber,gidNumber,dc eq

dn: olcDatabase={1}hdb,cn=config
changetype: modify
add: olcDbIndex
olcDbIndex: mail,givenName eq,subinitial


### security consideration ###################################

# http://www.openldap.org/doc/admin24/security.html
#
# The "simple" auth sends password in clear text if not use TLS,
# don't allow "simple" authentication(bind_simple) as we'll reply
# on Kerberos v5, only SASL is allowed.
#
# Explictly disable annoymous(bind_anon) and unauthenticated(bind_anon_cred)
# modes of "simple" method.
dn: cn=config
changetype: modify
add: olcDisallows
olcDisallows: bind_anon bind_anon_cred bind_simple

# Only allow "user/password" authenticated mode of "simple" method, actually
# this is unnecessary because "bind_simple" is already disabled above.
dn: cn=config
changetype: modify
add: olcRequires
olcRequires: authc

#dn: cn=config
#changetype: modify
#add: olcSecurity
#olcSecurity: ssf=1 update_ssf=112 simple_bind=112

### Using TLS #################################################

#olcTLSCACertificateFile: /etc/ldap/ca-cert.pem
olcTLSCertificateFile: /etc/ldap/self-ca-cert.pem
olcTLSCertificateKeyFile: /etc/ldap/self-ca-key.pem
olcTLSVerifyClient: never

