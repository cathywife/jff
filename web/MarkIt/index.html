<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Mark It!</title>

<link rel="stylesheet" href="css/blueprint/screen.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="css/blueprint/print.css" type="text/css" media="print" />
<!--[if lt IE 8]><link rel="stylesheet" href="css/blueprint/ie.css" type="text/css" media="screen, projection"/><![endif]-->

<link rel="stylesheet" href="css/blueprint/plugins/buttons/screen.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="css/blueprint/plugins/fancy-type/screen.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="css/blueprint/plugins/link-icons/screen.css" type="text/css" media="screen, projection" />
<style type="text/css">
    #noscript {
        border: 5px red solid;
        text-align: center;
        padding: 10px;
    }
</style>

<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
<script type="text/javascript">
$(function() {
    var a = document.getElementById("loader-url");
    var href = a.href;
    var root = location.href.substring(0, location.href.lastIndexOf("/")) + "/";
    var debug = false;

    $("#markit_key").val("change me!");
    $("#markit_key").one("focus", function() {
        $(this).val("");
    });

    $("#btn_update").click(function() {
        if ($("#markit_key").val().length == 0) {
            alert("MarkIt 密钥不能为空!");
            return false;
        }

        update_link();

        if (debug) {
            alert("Mark It! : " + a.href.length + "\n" + a.href);
        } else {
            alert("请重新拖动\"Mark It!\"链接到书签栏，并请记住 MarkIt 密钥！");
        }

        return false;   // avoid submit the form!
    });

    update_link();

    function update_link() {
        a.href = href.replace(
                    /##MARKIT_ROOT##/g, root).replace(
                    /##MARKIT_URL##/g, debug ? "markit.js" : "markit.min.js").replace(
                    /##MARKIT_KEY##/g, $("#markit_key").val());

        $("#loader-url").fadeOut(1000, function() {
            $(this).fadeIn(1000);
        });
    }
});
</script>
</head>

<body>
<div class="container">
<div id="main" class="span-24 last">

<noscript>
    <p id="noscript">此页面需要 JavaScript 支持！</p>
</noscript>

<h1>MarkIt 安装程序</h1>

<p>
使用说明：
<ul>
    <li>填写 "MarkIt 密钥" 后，点击 "更新链接"，然后将 "Mark It!" 链接拖到浏览器的书签栏(Bookmarks Toolbar)，点击此书签，会在当前窗口显示或隐藏 MarkIt 对话框；</li>

    <li>请记录好 MarkIt 密钥，升级 "Mark It" 时，需要填入此密钥， 然后点击 "更新链接"，重做书签；</li>

</ul>
</p>

<hr/>
<form>
    <p>
    <label for="markit_key">MarkIt 密钥：</label>
    <input type="text" id="markit_key"/>
    </p>

    </p>
    <button id="btn_update">更新链接</button>
    <a id="loader-url" href='##LOADER_URL##'>Mark It!</a>
    </p>
</form>

<hr/>
<p> 作者：Liu Yubao (yubao dot liu at gmail dot com), 2010-06-27</p>

</div>
</div>
</body>
</html>

