<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Mark It!</title>

<link rel="stylesheet" href="css/blueprint/screen.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="css/blueprint/print.css" type="text/css" media="print" />
<!--[if lt IE 8]><link rel="stylesheet" href="css/blueprint/ie.css" type="text/css" media="screen, projection"/><![endif]-->

<link rel="stylesheet" href="css/blueprint/plugins/buttons/screen.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="css/blueprint/plugins/fancy-type/screen.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="css/blueprint/plugins/link-icons/screen.css" type="text/css" media="screen, projection" />
<style type="text/css">
    #noscript {
        border: 5px red solid;
        text-align: center;
        padding: 10px;
    }
</style>

<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
<script type="text/javascript">
$(function() {
    var a = document.getElementById("loader-url");
    var href = a.href;
    var root = location.href.substring(0, location.href.lastIndexOf("/")) + "/";
    var debug = false;

    $("input[type=text]").attr("size", "80");

    $("#markit_key").val("my.secret.markit.key");

    $("#btn_update").click(function() {
        update_link();

        if (debug) {
            alert("Mark It! : " + a.href.length + "\n" + a.href);
        } else {
            alert("Update link successfully, please create your \"Mark It!\" bookmark again!");
        }

        return false;   // avoid submit the form!
    });

    update_link();

    function update_link() {
        if (debug) {
            a.href = href.replace(
                    /##MARKIT_ROOT##/g, root).replace(
                    /##MARKIT_URL##/g, "markit.js").replace(
                    /##JQUERY_URL##/g, "js/jquery-1.4.2.js").replace(
                    /##JQUERY_UI_URL##/g, "js/jquery-ui-1.8.2.custom.js").replace(
                    /##CKEDITOR_URL##/g, "ckeditor/ckeditor_source.js");
        } else {
            a.href = href.replace(
                    /##MARKIT_ROOT##/g, root).replace(
                    /##MARKIT_URL##/g, "markit.min.js").replace(
                    /##JQUERY_URL##/g, "js/jquery-1.4.2.min.js").replace(
                    /##JQUERY_UI_URL##/g, "js/jquery-ui-1.8.2.custom.min.js").replace(
                    /##CKEDITOR_URL##/g, "ckeditor/ckeditor.js");
        }

        a.href = a.href.replace(/##MARKIT_KEY##/, $("#markit_key").val());

        $("#loader-url").fadeOut(1000, function() {
            $(this).fadeIn(1000);
        });
    }
});
</script>
</head>

<body>
<div class="container">
<div id="main" class="span-24 last">

<noscript>
    <p id="noscript">此页面需要 JavaScript 支持！</p>
</noscript>

<h1>MarkIt 安装程序</h1>

<p>
使用说明：
<ul>
    <li>填写 "Mark It key" 后，点击 "Update link"，然后 "Mark It!" 链接拖到浏览器的书签栏(Bookmarks Toolbar)，点击此书签，会在当前窗口显示或隐藏 MarkIt 对话框；</li>

    <li>升级 "Mark It" 时，需要填入之前的 "Mark It key"， 然后点击 "Update link"，重做书签；</li>

    <li><a href="#more">更多说明……</a></li>

</ul>
</p>

<hr/>
<form>
    <p>
    <label for="markit_key">Mark It key: a secret string used as storage key:</label><br/>
    <input type="text" id="markit_key"/><br/>
    </p>

    </p>
    <button id="btn_update">Update link</button>
    </p>

    <p>
    <a id="loader-url" href='##LOADER_URL##'>Mark It!</a><br/>
    </p>
</form>

<hr/>
<a name="more">更多说明:</a><br/>
待续。。。。

<hr/>
<p> 作者：Liu Yubao (yubao dot liu at gmail dot com), 2010-06-27</p>

</div>
</div>
</body>
</html>

